# Simple ls
## Цель проекта
Тестовое задание на разработку Unix-утилиты ls. На реализацию наложены следующие ограничения:
1. утилита должна работать на ОС Linux;
2. компилятор - GCC;
3. стандарт C++11 (не выше);

## Как собрать проект?
Собрать проект:
```shell 
bash build.sh
```

## Как использовать?
Запустить без опций:
```shell 
bash run.sh 
```

Запустить с -l:
```shell 
bash run.sh -l
```

Все доступные опции аналогичны оригинальной утилите ls:
```shell 
bash run.sh -lh
```

Пример запуска с указанием пути:
```shell
bash run.sh / 
bash run.sh -lh /
bash run.sh -lr /bin/
```

Все доступные опции аналогично оригинальной утилиты ls:
```shell 
-l - вывод в виде таблицы (long format)
-h - показывает размер файла в удобночитаемом формате (K, M, G)
-r - вывод в обратном порядке
```

Протестировано на Arch Linux. 

## Disclaimer
Главная сложность возникла в ограничении стандарта C++ и то, что нет std::filesystem, который появился в C++17. Можно было использовать boost::filesystem, однако основная цель задания, на мой взгляд, заключалась в работе с POSIX API.

Впервые на практике поработал с POSIX API. До этого пробовал из POSIX API только то, что связанно с Networking (socket, bind, listen, connect, send и recv). 

Есть несколько моментов по коду, которые вызвали трудность. 
Первый момент - реализация вывода в простом режиме. Этот участок оказался наиболее трудоёмким. Честно, чтобы ее победить я даже лазил в исходники реализации ls из openbsd и реализации ls из coreutils.

Второй момент - целочисленное деление с усечением дробной части. Когда делим два целочисленных числа, например 7 / 4 = 1.75, то компилятор отбрасывает дробную часть .75 и оставляет 1. Пришлось применить стандартный приём округления вверх, найденный в обсуждениях на Stack Overflow.
Об этом в коде комментарий есть, что трюк позаимствован.

Третий момент - это метод LongDisplay() под конец образовалось много копипаста, что требует рефакторинга, однако в рамках тестового задания оставлено без изменений. Может в будущем уже для себя перепишу этот кусок кода.

Тесты в проекте отсутствуют, что является осознанным упущением в рамках ограниченного времени выполнения задания. 
В дальнейшем проект можно расширить покрытием unit-тестами.

Дополнительно реализована цветовая подсветка: директории выводятся синим цветом, символические ссылки — пурпурным (magenta).

Ниже показана короткая демонстрация работы утилиты в стандартном режиме, а также с опциями `-l`, `-h` и `-r`.

![me](https://github.com/lpdgrl/ls/tree/main/img/ls.gif)


